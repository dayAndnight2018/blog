
 <!DOCTYPE HTML>
<html lang="en">
<head>
  <meta charset="UTF-8">
  
    <title>java13 输入输出 | 成华的博客</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="成华">
    

    
    <meta name="description" content="File Systems and PathsFileSystem代表一个文件系统。它是一个抽象类。 获取FileSystem对象  获取分割符  win下是\，Linux下是&#x2F; 获取根目录  获取到一个Iterable 获取一个路径  后续的参数可以用于拼接   java.nio.file.Paths也提供了类似的方法：     &#x2F;&#x2F;获取名称 Path getName(int index)  Pa">
<meta property="og:type" content="article">
<meta property="og:title" content="java13 输入输出">
<meta property="og:url" content="https://dayandnight2018.github.io/2020/02/22/java13-Input-Output/index.html">
<meta property="og:site_name" content="成华的博客">
<meta property="og:description" content="File Systems and PathsFileSystem代表一个文件系统。它是一个抽象类。 获取FileSystem对象  获取分割符  win下是\，Linux下是&#x2F; 获取根目录  获取到一个Iterable 获取一个路径  后续的参数可以用于拼接   java.nio.file.Paths也提供了类似的方法：     &#x2F;&#x2F;获取名称 Path getName(int index)  Pa">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://dayandnight2018.github.io/blog/2020/02/22/java13-Input-Output/2b912a34-df1d-41d1-a1aa-e522dd575f4f.jpg">
<meta property="og:image" content="https://dayandnight2018.github.io/blog/2020/02/22/java13-Input-Output/ae620946-4f88-4327-94ef-5cb232cca4ee.jpg">
<meta property="og:image" content="https://dayandnight2018.github.io/blog/2020/02/22/java13-Input-Output/6c777170-1972-4c5c-bfe4-98f0d1ef2abf.jpg">
<meta property="og:image" content="https://dayandnight2018.github.io/blog/2020/02/22/java13-Input-Output/de2eb829-01c9-43a4-9c2a-7d574a879b2c.jpg">
<meta property="og:image" content="https://dayandnight2018.github.io/blog/2020/02/22/java13-Input-Output/cc37d25e-0add-4e45-9bd0-1c48242cbf92.jpg">
<meta property="og:image" content="https://dayandnight2018.github.io/blog/2020/02/22/java13-Input-Output/acbba703-b077-4b47-bd49-5d5939b7c05f.jpg">
<meta property="og:image" content="https://dayandnight2018.github.io/blog/2020/02/22/java13-Input-Output/45740644-0457-4b80-a7e0-e385448a3343.jpg">
<meta property="og:image" content="https://dayandnight2018.github.io/blog/2020/02/22/java13-Input-Output/c5579496-a47a-456a-b246-a889d3c64d77.jpg">
<meta property="og:image" content="https://dayandnight2018.github.io/blog/2020/02/22/java13-Input-Output/4138a502-0afb-454d-bb08-9c7de77517d8.jpg">
<meta property="og:image" content="https://dayandnight2018.github.io/blog/2020/02/22/java13-Input-Output/1a302b1c-bc59-4d1b-898f-0fa774117f13.jpg">
<meta property="og:image" content="https://dayandnight2018.github.io/blog/2020/02/22/java13-Input-Output/c31932b7-052d-4677-a187-60cd99cb4689.jpg">
<meta property="og:image" content="https://dayandnight2018.github.io/blog/2020/02/22/java13-Input-Output/2e3fdbef-974e-4e02-ab5d-10d2a6ed1162.jpg">
<meta property="og:image" content="https://dayandnight2018.github.io/blog/2020/02/22/java13-Input-Output/9341c8e5-24bf-4fea-a2b4-03b8d14c069f.jpg">
<meta property="og:image" content="https://dayandnight2018.github.io/blog/2020/02/22/java13-Input-Output/4e138aef-9edf-4e05-b947-284f5451cbbb.jpg">
<meta property="og:image" content="https://dayandnight2018.github.io/blog/2020/02/22/java13-Input-Output/e220392e-3c3e-43eb-a79e-cdf41b7db454.jpg">
<meta property="og:image" content="https://dayandnight2018.github.io/blog/2020/02/22/java13-Input-Output/11740d87-f39e-4e0e-813a-016fc199d413.jpg">
<meta property="og:image" content="https://dayandnight2018.github.io/blog/2020/02/22/java13-Input-Output/9d766191-db65-498b-9989-a1bbca527a91.jpg">
<meta property="og:image" content="https://dayandnight2018.github.io/blog/2020/02/22/java13-Input-Output/b9a52e27-41ad-4839-bdcb-4b6ed85e83b4.jpg">
<meta property="og:image" content="https://dayandnight2018.github.io/blog/2020/02/22/java13-Input-Output/8ef3fdca-8683-4667-b354-4bef867b081f.jpg">
<meta property="og:image" content="https://dayandnight2018.github.io/blog/2020/02/22/java13-Input-Output/e2d061c2-e47e-4d26-a60f-b7887650b9a2.jpg">
<meta property="og:image" content="https://dayandnight2018.github.io/blog/2020/02/22/java13-Input-Output/02fd782e-ede8-4972-8feb-2fe62f6dedd7.jpg">
<meta property="og:image" content="https://dayandnight2018.github.io/blog/2020/02/22/java13-Input-Output/5950ae67-ccbd-4aa1-9cf2-90d16b7f8659.jpg">
<meta property="og:image" content="https://dayandnight2018.github.io/blog/2020/02/22/java13-Input-Output/c04ec6cd-888b-4186-9e8c-89f5b5ef9053.jpg">
<meta property="og:image" content="https://dayandnight2018.github.io/blog/2020/02/22/java13-Input-Output/11f79073-169c-4005-a6f2-b3e8143ee5e1.jpg">
<meta property="og:image" content="https://dayandnight2018.github.io/blog/2020/02/22/java13-Input-Output/1f99320b-e33b-4607-a396-0d39b70f94cb.jpg">
<meta property="og:image" content="https://dayandnight2018.github.io/blog/2020/02/22/java13-Input-Output/800a89fd-2c2d-437d-bbd4-08e34bf6146d.jpg">
<meta property="og:image" content="https://dayandnight2018.github.io/blog/2020/02/22/java13-Input-Output/7790c7f6-7eec-4472-a942-f58c66b7f292.jpg">
<meta property="og:image" content="https://dayandnight2018.github.io/blog/2020/02/22/java13-Input-Output/072c515d-ac0d-4184-9713-09f7f080e0e4.jpg">
<meta property="og:image" content="https://dayandnight2018.github.io/blog/2020/02/22/java13-Input-Output/629ef8df-1105-457f-ade2-ad223636ddb0.jpg">
<meta property="og:image" content="https://dayandnight2018.github.io/blog/2020/02/22/java13-Input-Output/291d4940-4cbb-4970-a2bd-b240667aec9f.jpg">
<meta property="og:image" content="https://dayandnight2018.github.io/blog/2020/02/22/java13-Input-Output/3c52b39e-36e1-4422-a1c7-3503a3c1ea01.jpg">
<meta property="og:image" content="https://dayandnight2018.github.io/blog/2020/02/22/java13-Input-Output/a6443ff0-3374-48bf-af0e-f7b3f1449244.jpg">
<meta property="og:image" content="https://dayandnight2018.github.io/blog/2020/02/22/java13-Input-Output/c457a25f-a193-41b6-b2a3-6729737c5b03.jpg">
<meta property="og:image" content="https://dayandnight2018.github.io/blog/2020/02/22/java13-Input-Output/442af3ce-b0f4-40d4-911d-ba258babea27.jpg">
<meta property="og:image" content="https://dayandnight2018.github.io/blog/2020/02/22/java13-Input-Output/fe3ed325-c039-4c8d-b19e-3d388181d86d.jpg">
<meta property="og:image" content="https://dayandnight2018.github.io/blog/2020/02/22/java13-Input-Output/271d3878-73b2-4735-bfff-a178a3050fbc.jpg">
<meta property="og:image" content="https://dayandnight2018.github.io/blog/2020/02/22/java13-Input-Output/c0e9ba62-9190-461e-a8a4-7be61b8e9e0c.jpg">
<meta property="og:image" content="https://dayandnight2018.github.io/blog/2020/02/22/java13-Input-Output/c753ffc8-f23c-4ac5-9180-941e891c2163.jpg">
<meta property="og:image" content="https://dayandnight2018.github.io/blog/2020/02/22/java13-Input-Output/43cebc83-18d2-4a27-aa14-e6411a72e75d.jpg">
<meta property="og:image" content="https://dayandnight2018.github.io/blog/2020/02/22/java13-Input-Output/9890dbaf-7e9c-406e-bb5d-aec4877eb4f3.jpg">
<meta property="og:image" content="https://dayandnight2018.github.io/blog/2020/02/22/java13-Input-Output/b3d3ee62-7c53-4887-ad79-a46fb6c9c6e7.jpg">
<meta property="og:image" content="https://dayandnight2018.github.io/blog/2020/02/22/java13-Input-Output/6eb26a88-d7cc-41bc-b27c-e7be21f73b74.jpg">
<meta property="og:image" content="https://dayandnight2018.github.io/blog/2020/02/22/java13-Input-Output/503b5f71-6570-40de-8d51-b5cd1f91bced.jpg">
<meta property="og:image" content="https://dayandnight2018.github.io/blog/2020/02/22/java13-Input-Output/b446df6a-bc89-4c42-bbf4-b0cafc16e565.jpg">
<meta property="og:image" content="https://dayandnight2018.github.io/blog/2020/02/22/java13-Input-Output/12aecef2-9d59-48ac-92b5-e9ed03fc2036.jpg">
<meta property="og:image" content="https://dayandnight2018.github.io/blog/2020/02/22/java13-Input-Output/b05dbf43-b103-4db5-8310-0b8462b4ba3d.jpg">
<meta property="og:image" content="https://dayandnight2018.github.io/blog/2020/02/22/java13-Input-Output/82b2ad15-e3ea-4a99-a10b-b23c2badf47f.jpg">
<meta property="og:image" content="https://dayandnight2018.github.io/blog/2020/02/22/java13-Input-Output/d6aa4170-5154-4ee6-90b0-cc0ca64a4a1c.jpg">
<meta property="article:published_time" content="2020-02-22T04:35:29.000Z">
<meta property="article:modified_time" content="2020-02-29T02:12:38.622Z">
<meta property="article:author" content="成华">
<meta property="article:tag" content="java">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://dayandnight2018.github.io/blog/2020/02/22/java13-Input-Output/2b912a34-df1d-41d1-a1aa-e522dd575f4f.jpg">

    
    <link rel="alternative" href="/atom.xml" title="成华的博客" type="application/atom+xml">
    
    
    <link rel="icon" href="/blog/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/blog/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/blog/img/jacman.jpg">
    
    
<link rel="stylesheet" href="/blog/css/style.css">
<link rel="stylesheet" href="/blog/%02.css">
<link rel="stylesheet" href="/blog/.css">

<meta name="generator" content="Hexo 4.2.0"></head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/blog/"><img src="/blog/img/logo.png" alt="成华的博客" title="成华的博客"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/blog/" title="成华的博客">成华的博客</a></h1>
				<h2 class="blog-motto"></h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="Menu">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/blog/">首页</a></li>
					
						<li><a href="/blog/archives/">博客</a></li>
					
						<li><a href="/blog/tags/">标签</a></li>
					
						<li><a href="/blog/about/">关于</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="Search" />
						<input type="hidden" name="q" value="site:dayandnight2018.github.io">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/blog/2020/02/22/java13-Input-Output/" title="java13 输入输出" itemprop="url">java13 输入输出</a>
  </h1>
  <p class="article-author">By
       
		<a href="/blog/about" title="成华" target="_blank" itemprop="author">成华</a>
		
  <p class="article-time">
    <time datetime="2020-02-22T04:35:29.000Z" itemprop="datePublished"> Published 2020-02-22</time>
    
  </p>
</header>
	<div class="article-content">
		
		<h2 id="File-Systems-and-Paths"><a href="#File-Systems-and-Paths" class="headerlink" title="File Systems and Paths"></a>File Systems and Paths</h2><p>FileSystem代表一个文件系统。它是一个抽象类。</p>
<h3 id="获取FileSystem对象"><a href="#获取FileSystem对象" class="headerlink" title="获取FileSystem对象"></a>获取FileSystem对象</h3><img src="/blog/2020/02/22/java13-Input-Output/2b912a34-df1d-41d1-a1aa-e522dd575f4f.jpg">

<h3 id="获取分割符"><a href="#获取分割符" class="headerlink" title="获取分割符"></a>获取分割符</h3><img src="/blog/2020/02/22/java13-Input-Output/ae620946-4f88-4327-94ef-5cb232cca4ee.jpg">

<p>win下是\，Linux下是/</p>
<h3 id="获取根目录"><a href="#获取根目录" class="headerlink" title="获取根目录"></a>获取根目录</h3><img src="/blog/2020/02/22/java13-Input-Output/6c777170-1972-4c5c-bfe4-98f0d1ef2abf.jpg">

<p>获取到一个Iterable<Path></Path></p>
<h3 id="获取一个路径"><a href="#获取一个路径" class="headerlink" title="获取一个路径"></a>获取一个路径</h3><img src="/blog/2020/02/22/java13-Input-Output/de2eb829-01c9-43a4-9c2a-7d574a879b2c.jpg">

<p>后续的参数可以用于拼接</p>
<img src="/blog/2020/02/22/java13-Input-Output/cc37d25e-0add-4e45-9bd0-1c48242cbf92.jpg">

<p>java.nio.file.Paths也提供了类似的方法：</p>
<img src="/blog/2020/02/22/java13-Input-Output/acbba703-b077-4b47-bd49-5d5939b7c05f.jpg">

<pre style="background:#e6e6e6;padding=10px;">

//获取名称
Path getName(int index)

Path path = Paths.get("/home/user/images");
System.out.println(path.getNameCount()); // prints 3
System.out.println(path.getName(0)); // prints home
System.out.println(path.getName(1)); // prints user
System.out.println(path.getName(2)); // prints images

</pre>

<pre style="background:#e6e6e6;padding=10px;">

//获取文件名
Path getFileName()

//获取父目录
Path getParent()

//获取根目录
Path getRoot()

</pre>

<h2 id="文件目录操作"><a href="#文件目录操作" class="headerlink" title="文件目录操作"></a>文件目录操作</h2><p><code style="background:#ff3385;color:white;padding:5px;">Files</code>类的方法：</p>
<h3 id="创建文件"><a href="#创建文件" class="headerlink" title="创建文件"></a>创建文件</h3><img src="/blog/2020/02/22/java13-Input-Output/45740644-0457-4b80-a7e0-e385448a3343.jpg">

<h3 id="创建路径"><a href="#创建路径" class="headerlink" title="创建路径"></a>创建路径</h3><img src="/blog/2020/02/22/java13-Input-Output/c5579496-a47a-456a-b246-a889d3c64d77.jpg">

<h3 id="删除文件、路径、链接"><a href="#删除文件、路径、链接" class="headerlink" title="删除文件、路径、链接"></a>删除文件、路径、链接</h3><img src="/blog/2020/02/22/java13-Input-Output/4138a502-0afb-454d-bb08-9c7de77517d8.jpg">

<p>如果路径不存在将抛出异常，为此，可以使用以下方法：</p>
<img src="/blog/2020/02/22/java13-Input-Output/1a302b1c-bc59-4d1b-898f-0fa774117f13.jpg">

<h3 id="操作目录"><a href="#操作目录" class="headerlink" title="操作目录"></a>操作目录</h3><img src="/blog/2020/02/22/java13-Input-Output/c31932b7-052d-4677-a187-60cd99cb4689.jpg">

<p>使用<code style="background:#ff3385;color:white;padding:5px;">DirectoryStream</code>对目录进行遍历(注意资源释放)：</p>
<pre style="background:#e6e6e6;padding=10px;">

Path parent = ...
try (DirectoryStream<Path> children =
&nbsp;&nbsp;Files.newDirectoryStream(parent)) {
&nbsp;&nbsp;&nbsp;&nbsp;for (Path child : children) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(child);
&nbsp;&nbsp;}
} catch (IOException e) {
&nbsp;&nbsp;e.printStackTrace();
}

</Path></pre>

<h3 id="文件复制"><a href="#文件复制" class="headerlink" title="文件复制"></a>文件复制</h3><pre style="background:#e6e6e6;padding=10px;">

public static Path copy(Path source, Path target,CopyOption... options)

</pre>

<p>StandardCopyOption包含以下几种枚举：</p>
<p>ATOMIC_MOVE（原子操作）</p>
<p>COPY_ATTRIBUTES（复制文件属性）</p>
<p>REPLACE_EXISTING（覆盖已有文件）</p>
<p>示例代码：</p>
<img src="/blog/2020/02/22/java13-Input-Output/2e3fdbef-974e-4e02-ab5d-10d2a6ed1162.jpg">

<h3 id="文件移动"><a href="#文件移动" class="headerlink" title="文件移动"></a>文件移动</h3><pre style="background:#e6e6e6;padding=10px;">

public static Path move(Path source, Path target,CopyOption... options) throws java.io.IOException

</pre>

<p>示例代码：</p>
<img src="/blog/2020/02/22/java13-Input-Output/9341c8e5-24bf-4fea-a2b4-03b8d14c069f.jpg">

<h2 id="读写文件"><a href="#读写文件" class="headerlink" title="读写文件"></a>读写文件</h2><p>Files类可以读写小型文本或二进制文件。</p>
<h3 id="读取"><a href="#读取" class="headerlink" title="读取"></a>读取</h3><p>读取<code style="background:#ff3385;color:white;padding:5px;">二进制</code>文件：</p>
<pre style="background:#e6e6e6;padding=10px;">

public static byte[] readAllBytes(Path path)
         throws java.io.IOException

</pre>

<p>读取<code style="background:#ff3385;color:white;padding:5px;">字符串</code>文本：</p>
<pre style="background:#e6e6e6;padding=10px;">

public static List<String> readAllLines(Path path,java.nio.charset.Charset charset)   
         throws java.io.IOException

</String></pre>

<h3 id="写入"><a href="#写入" class="headerlink" title="写入"></a>写入</h3><p>写入<code style="background:#ff3385;color:white;padding:5px;">二进制</code>：</p>
<pre style="background:#e6e6e6;padding=10px;">

public static Path write(Path path, byte[] bytes,OpenOption... options) 
          throws java.io.IOException

</pre>

<p>写入<code style="background:#ff3385;color:white;padding:5px;">文本</code>：</p>
<pre style="background:#e6e6e6;padding=10px;">

public static Path write(Path path, java.lang.Iterable<? extends CharSequence> lines, java.nio.charset.Charset charset,OpenOption... options)
           throws java.io.IOException

</pre>

<p>StandardOpenOption选项：</p>
<p>APPEND追加</p>
<p>CREATE如果不存在则创建</p>
<p>CREATE_NEW不存在则创建，否则抛出异常</p>
<p>DELETE_ON_CLOSE文件关闭时，删除</p>
<p>READ读取</p>
<p>WRITE写入</p>
<p>TRUNCATE_EXISTING文件存在则清空内容</p>
<p>SPARSE稀疏文件</p>
<p>SYNC同步内容和元数据写入</p>
<p>DSYNC同步内容写入</p>
<p>编码方法：</p>
<img src="/blog/2020/02/22/java13-Input-Output/4e138aef-9edf-4e05-b947-284f5451cbbb.jpg">

<p>读写示例：</p>
<img src="/blog/2020/02/22/java13-Input-Output/e220392e-3c3e-43eb-a79e-cdf41b7db454.jpg">

<h2 id="输入输出流"><a href="#输入输出流" class="headerlink" title="输入输出流"></a>输入输出流</h2><table cellpadding="8" border="1" style="background:#EAF2D3;text-align:center">
<tr>
&nbsp;<td>
类型
&nbsp;</td>
&nbsp;<td>
描述
&nbsp;</td>
</tr>

<tr>
&nbsp;<td>
Reader
&nbsp;</td>
&nbsp;<td>
读取字符
&nbsp;</td>
</tr>

<tr>
&nbsp;<td>
Writer
&nbsp;</td>
&nbsp;<td>
写入字符
&nbsp;</td>
</tr>

<tr>
&nbsp;<td>
InputStream
&nbsp;</td>
&nbsp;<td>
二进制读取流
&nbsp;</td>
</tr>

<tr>
&nbsp;<td>
OutputStream
&nbsp;</td>
&nbsp;<td>
二进制输出流
&nbsp;</td>
</tr>

</table>

<h2 id="读取二进制数据"><a href="#读取二进制数据" class="headerlink" title="读取二进制数据"></a>读取二进制数据</h2><img src="/blog/2020/02/22/java13-Input-Output/11740d87-f39e-4e0e-813a-016fc199d413.jpg">

<p>java7之前可以new一个FileInputStream，现在也可以使用Files类创建：</p>
<img src="/blog/2020/02/22/java13-Input-Output/9d766191-db65-498b-9989-a1bbca527a91.jpg">

<p>示例代码：</p>
<pre style="background:#e6e6e6;padding=10px;">

Path path = ...
try (InputStream inputStream = Files.newInputStream(path,
&nbsp;&nbsp;StandardOpenOption.READ) {
&nbsp;&nbsp;// manipulate inputStream
} catch (IOException e) {
&nbsp;&nbsp;// do something with e
}

</pre>

<p>为了提升效率，使用BufferedInputStream:</p>
<pre style="background:#e6e6e6;padding=10px;">

Path path = ...
try (InputStream inputStream = Files.newInputStream(path,StandardOpenOption.READ);
&nbsp;&nbsp;&nbsp;&nbsp;BufferedInputStream buffered = new BufferedInputStream(inputStream)) {
&nbsp;&nbsp;// manipulate buffered, not inputStream
} catch (IOException e) {
&nbsp;&nbsp;// do something with e
}

</pre>

<h3 id="读取数据"><a href="#读取数据" class="headerlink" title="读取数据"></a>读取数据</h3><img src="/blog/2020/02/22/java13-Input-Output/b9a52e27-41ad-4839-bdcb-4b6ed85e83b4.jpg">

<p>到达流的末尾时，返回-1</p>
<h3 id="获取可读取数据大小"><a href="#获取可读取数据大小" class="headerlink" title="获取可读取数据大小"></a>获取可读取数据大小</h3><img src="/blog/2020/02/22/java13-Input-Output/8ef3fdca-8683-4667-b354-4bef867b081f.jpg">

<h3 id="跳过指定个数字节"><a href="#跳过指定个数字节" class="headerlink" title="跳过指定个数字节"></a>跳过指定个数字节</h3><img src="/blog/2020/02/22/java13-Input-Output/e2d061c2-e47e-4d26-a60f-b7887650b9a2.jpg">

<h3 id="标记位置"><a href="#标记位置" class="headerlink" title="标记位置"></a>标记位置</h3><img src="/blog/2020/02/22/java13-Input-Output/02fd782e-ede8-4972-8feb-2fe62f6dedd7.jpg">

<h3 id="返回标记处"><a href="#返回标记处" class="headerlink" title="返回标记处"></a>返回标记处</h3><img src="/blog/2020/02/22/java13-Input-Output/5950ae67-ccbd-4aa1-9cf2-90d16b7f8659.jpg">

<h3 id="关闭流"><a href="#关闭流" class="headerlink" title="关闭流"></a>关闭流</h3><img src="/blog/2020/02/22/java13-Input-Output/c04ec6cd-888b-4186-9e8c-89f5b5ef9053.jpg">

<h2 id="写入二进制数据"><a href="#写入二进制数据" class="headerlink" title="写入二进制数据"></a>写入二进制数据</h2><img src="/blog/2020/02/22/java13-Input-Output/11f79073-169c-4005-a6f2-b3e8143ee5e1.jpg">

<p>java7之前可以new一个FileOutputStream，现在也可以使用Files类创建：</p>
<img src="/blog/2020/02/22/java13-Input-Output/1f99320b-e33b-4607-a396-0d39b70f94cb.jpg">

<p>示例代码：</p>
<pre style="background:#e6e6e6;padding=10px;">

Path path = ...
try (OutputStream outputStream = Files.newOutputStream(path,
StandardOpenOption.CREATE, StandardOpenOption.APPEND) {
&nbsp;&nbsp;// manipulate outputStream
} catch (IOException e) {
&nbsp;&nbsp;// do something with e
}

</pre>

<p>为了提高效率，使用缓冲流：</p>
<img src="/blog/2020/02/22/java13-Input-Output/800a89fd-2c2d-437d-bbd4-08e34bf6146d.jpg">

<h3 id="写入数据"><a href="#写入数据" class="headerlink" title="写入数据"></a>写入数据</h3><img src="/blog/2020/02/22/java13-Input-Output/7790c7f6-7eec-4472-a942-f58c66b7f292.jpg">

<h3 id="关闭流、刷新流"><a href="#关闭流、刷新流" class="headerlink" title="关闭流、刷新流"></a>关闭流、刷新流</h3><p>close用于关闭，一般使用try结构即可。</p>
<p>flush方法用于将数据刷新写入。</p>
<p>数据写入示例：</p>
<img src="/blog/2020/02/22/java13-Input-Output/072c515d-ac0d-4184-9713-09f7f080e0e4.jpg">

<h2 id="写文本"><a href="#写文本" class="headerlink" title="写文本"></a>写文本</h2><img src="/blog/2020/02/22/java13-Input-Output/629ef8df-1105-457f-ade2-ad223636ddb0.jpg">

<h2 id="Writer"><a href="#Writer" class="headerlink" title="Writer"></a>Writer</h2><h3 id="写入文本"><a href="#写入文本" class="headerlink" title="写入文本"></a>写入文本</h3><img src="/blog/2020/02/22/java13-Input-Output/291d4940-4cbb-4970-a2bd-b240667aec9f.jpg">

<p>也可以写入字符串：</p>
<img src="/blog/2020/02/22/java13-Input-Output/3c52b39e-36e1-4422-a1c7-3503a3c1ea01.jpg">

<h3 id="OutputStreamWriter"><a href="#OutputStreamWriter" class="headerlink" title="OutputStreamWriter"></a>OutputStreamWriter</h3><img src="/blog/2020/02/22/java13-Input-Output/a6443ff0-3374-48bf-af0e-f7b3f1449244.jpg">

<p>按照指定的编码方式进行写入。</p>
<p>写入文件时，可以使用OutputStream和OutputStreamWriter包装：</p>
<pre style="background:#e6e6e6;padding=10px;">

OutputStream os = Files.newOutputStream(path, openOption);
OutputStreamWriter writer = new OutputStreamWriter(os, charset);

</pre>

<p>使用示例：</p>
<img src="/blog/2020/02/22/java13-Input-Output/c457a25f-a193-41b6-b2a3-6729737c5b03.jpg">

<h3 id="PrintWriter"><a href="#PrintWriter" class="headerlink" title="PrintWriter"></a>PrintWriter</h3><p>相比来说，PrinterWriter更好用：</p>
<img src="/blog/2020/02/22/java13-Input-Output/442af3ce-b0f4-40d4-911d-ba258babea27.jpg">

<p>它的print方法支持大量类型：</p>
<img src="/blog/2020/02/22/java13-Input-Output/fe3ed325-c039-4c8d-b19e-3d388181d86d.jpg">

<p>同样，它也包含大量println方法，自动换行。</p>
<p>为了提升性能，包装一层缓冲流：</p>
<img src="/blog/2020/02/22/java13-Input-Output/271d3878-73b2-4735-bfff-a178a3050fbc.jpg">

<p>使用示例：</p>
<pre style="background:#e6e6e6;padding=10px;">

PrintWriter pw = new PrintWriter(new BufferedWriter(writer));

</pre>

<p>完整示例：</p>
<img src="/blog/2020/02/22/java13-Input-Output/c0e9ba62-9190-461e-a8a4-7be61b8e9e0c.jpg">

<h2 id="读取文本"><a href="#读取文本" class="headerlink" title="读取文本"></a>读取文本</h2><img src="/blog/2020/02/22/java13-Input-Output/c753ffc8-f23c-4ac5-9180-941e891c2163.jpg">

<h3 id="读取文本数据"><a href="#读取文本数据" class="headerlink" title="读取文本数据"></a>读取文本数据</h3><img src="/blog/2020/02/22/java13-Input-Output/43cebc83-18d2-4a27-aa14-e6411a72e75d.jpg">

<p>直接读取char[]数组数据。</p>
<p>也可以将数据读入NIO的CharBuffer:</p>
<img src="/blog/2020/02/22/java13-Input-Output/9890dbaf-7e9c-406e-bb5d-aec4877eb4f3.jpg">

<h2 id="InputStreamReader"><a href="#InputStreamReader" class="headerlink" title="InputStreamReader"></a>InputStreamReader</h2><p>可以读取二进制流，按照指定的编码格式转换成字符。</p>
<img src="/blog/2020/02/22/java13-Input-Output/b3d3ee62-7c53-4887-ad79-a46fb6c9c6e7.jpg">

<p>使用示例：</p>
<pre style="background:#e6e6e6;padding=10px;">

Path path = ...
Charset charset = ...
//创建InputStream
InputStream inputStream = Files.newInputStream(path,StandardOpenOption.READ);
//构造InputStreamReader
InputStreamReader reader = new InputStreamReader(inputStream, charset);

</pre>

<h2 id="BufferedReader"><a href="#BufferedReader" class="headerlink" title="BufferedReader"></a>BufferedReader</h2><p>使用BufferedReader可以提升读取性能。</p>
<p>在NIO中，Files提供了以下构造方法：</p>
<pre style="background:#e6e6e6;padding=10px;">

public static java.io.BufferedReader newBufferedReader(Path path,java.nio.charset.Charset charset)

</pre>

<p>使用示例：</p>
<pre style="background:#e6e6e6;padding=10px;">

Path path = ...
BufferedReader br = Files.newBufferedReader(path, charset);
String line = br.readLine();
while (line != null) {
    System.out.println(line);
    line = br.readLine();
}

</pre>

<p>也可以包装InputStreamReader:</p>
<pre style="background:#e6e6e6;padding=10px;">

public static String getUserInput() {
    BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
    try {
        return br.readLine();
    } catch (IOException ioe) {
    }
    return null;
}

</pre>


<h2 id="PrintStream"><a href="#PrintStream" class="headerlink" title="PrintStream"></a>PrintStream</h2><p>PrintStream是一种输出流，类似于PrintWriter,构造函数如下：</p>
<pre style="background:#e6e6e6;padding=10px;">

public PrintStream(OutputStream out)
public PrintStream(OutputStream out, boolean autoFlush)
public PrintStream(OutputStream out, boolean autoFlush,String encoding)

</pre>

<img src="/blog/2020/02/22/java13-Input-Output/6eb26a88-d7cc-41bc-b27c-e7be21f73b74.jpg">

<p>建立<code style="background:#ff3385;color:white;padding:5px;">OutputStream</code>，操作文件。使用<code style="background:#ff3385;color:white;padding:5px;">Print Stream</code>包装一层。将System的<code style="background:#ff3385;color:white;padding:5px;">标准输出</code>设置为PrintStream。</p>
<h2 id="Random-Access-Files"><a href="#Random-Access-Files" class="headerlink" title="Random Access Files"></a>Random Access Files</h2><p>随机读取文件的需求如下：</p>
<p>对文件的随机读取是对文件的指定位置的随机访问而不是从头到尾依次读取，类似于List和LinkedList的区别。<br>实现文件的随机访问有两种方式：</p>
<ol>
<li><p>RandomAccessFile</p>
</li>
<li><p>SeekableByteChannel</p>
</li>
</ol>
<pre style="background:#e6e6e6;padding=10px;">

SeekableByteChannel sbc = Files.newByteChannel(Path path, OpenOption... options);

//设置读写权限
SeekableByteChannel readOnlyByteChannel = Files.newByteChannel(path1, EnumSet.of(READ)));
SeekableByteChannel writableByteChannel = Files.newByteChannel(path2, EnumSet.of(CREATE,APPEND));

</pre>

<p>获取当前指针的位置：</p>
<pre style="background:#e6e6e6;padding=10px;">

long position() throws java.io.IOException

</pre>

<p>切换位置：</p>
<pre style="background:#e6e6e6;padding=10px;">

SeekableByteChannel position(long newPosition) throws java.io.IOException

</pre>

<p>获取文件大小：</p>
<pre style="background:#e6e6e6;padding=10px;">

long size() throws java.io.IOException

</pre>

<p>读取写入：</p>
<pre style="background:#e6e6e6;padding=10px;">

int read(java.nio.ByteBuffer buffer) throws java.io.IOException

int write(java.nio.ByteBuffer buffer) throws java.io.IOException

</pre>

<h2 id="ByteBuffer"><a href="#ByteBuffer" class="headerlink" title="ByteBuffer"></a>ByteBuffer</h2><p>ByteBuffer是Buffer的一种实现，还有CharBuffer, DoubleBuffer, FloatBuffer, IntBuffer, LongBuffer, ShortBuffer</p>
<p>ByteBuffer的一种简单的构造方法：</p>
<img src="/blog/2020/02/22/java13-Input-Output/503b5f71-6570-40de-8d51-b5cd1f91bced.jpg">

<p>示例：</p>
<pre style="background:#e6e6e6;padding=10px;">

ByteBuffer byteBuffer = ByteBuffer.allocate(100);

</pre>

<p>在ByteBuffer内部维护了一个Byte Array，可以通过以下方法获得：</p>
<img src="/blog/2020/02/22/java13-Input-Output/b446df6a-bc89-4c42-bbf4-b0cafc16e565.jpg">

<p>ByteBuffer的几种读写方法：</p>
<pre style="background:#e6e6e6;padding=10px;">

//直接添加
public abstract ByteBuffer put(byte b)
//在指定位置添加
public abstract ByteBuffer put(int index, byte b)
//添加数组
public ByteBuffer put(byte[] src)
//添加数组的一部分
public ByteBuffer put(byte[] src, int offset, int length)

//添加指定类型
public abstract ByteBuffer putInt(int value)
public abstract ByteBuffer putInt(int index, int value)

//读取
public abstract byte get()
public abstract byte get(int index)
public abstract float getFloat()
public abstract float getFloat(int index)

</pre>

<p>SeekableByteChannel操作完整示例：</p>
<ol>
<li>创建ByteBuffer并添加数据</li>
</ol>
<img src="/blog/2020/02/22/java13-Input-Output/12aecef2-9d59-48ac-92b5-e9ed03fc2036.jpg">

<ol start="2">
<li>创建SeekableByteChannel，写入数据</li>
</ol>
<img src="/blog/2020/02/22/java13-Input-Output/b05dbf43-b103-4db5-8310-0b8462b4ba3d.jpg">


<h2 id="对象的序列化"><a href="#对象的序列化" class="headerlink" title="对象的序列化"></a>对象的序列化</h2><p>对对象进行序列化可以用于存储对象状态，通过网络进行传输。再进行反序列化即可还原。对象进行序列化，需要实现Serializable接口。</p>
<ol>
<li>构造ObjectOutputStream</li>
</ol>
<pre style="background:#e6e6e6;padding=10px;">

public ObjectOutputStream(OutputStream out)

</pre>

<ol start="2">
<li>添加数据</li>
</ol>
<pre style="background:#e6e6e6;padding=10px;">

public void writeBoolean(boolean value)
public void writeByte(int value)
public void writeBytes(String value)
public void writeChar(int value)
public void writeChars(String value)
public void writeDouble(double value)
public void writeFloat(float value)
public void writeInt(int value)
public void writeLong(long value)
public void writeShort(short value)
public void writeObject(java.lang.Object value)

</pre>

<p>反序列化的过程：</p>
<ol>
<li>构造ObjectInputStream</li>
</ol>
<pre style="background:#e6e6e6;padding=10px;">

public ObjectInputStream(InputStream in)

</pre>

<ol start="2">
<li>读取数据</li>
</ol>
<pre style="background:#e6e6e6;padding=10px;">

public boolean readBoolean()
public byte readByte()
public char readChar()
public double readDouble()
public float readFloat()
public int readInt()
public long readLong()
public short readShort()
public java.lang.Object readObject()

</pre>

<p>完整示例：</p>
<p>序列化：</p>
<img src="/blog/2020/02/22/java13-Input-Output/82b2ad15-e3ea-4a99-a10b-b23c2badf47f.jpg">

<p>反序列化：</p>
<img src="/blog/2020/02/22/java13-Input-Output/d6aa4170-5154-4ee6-90b0-cc0ca64a4a1c.jpg">









  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/blog/tags/java/">java</a>
  </div>

</div>



	<div class="article-share" id="share">
	
	  <div data-url="https://dayandnight2018.github.io/2020/02/22/java13-Input-Output/" data-title="java13 输入输出 | 成华的博客" data-tsina="" class="share clearfix">
	  </div>
	
	</div>


</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/blog/2020/02/29/java14-Nested-and-Inner-Classes/" title="java14 内部类">
  <strong>上一篇：</strong><br/>
  <span>
  java14 内部类</span>
</a>
</div>


<div class="next">
<a href="/blog/2020/02/22/java12-Generics/"  title="java12 泛型">
 <strong>下一篇：</strong><br/> 
 <span>java12 泛型
</span>
</a>
</div>

</nav>

	



</div>  
      <div class="openaside"><a class="navbutton" href="#" title="Show Sidebar"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">Contents</strong>
 
 <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#File-Systems-and-Paths"><span class="toc-number">1.</span> <span class="toc-text">File Systems and Paths</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#获取FileSystem对象"><span class="toc-number">1.1.</span> <span class="toc-text">获取FileSystem对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#获取分割符"><span class="toc-number">1.2.</span> <span class="toc-text">获取分割符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#获取根目录"><span class="toc-number">1.3.</span> <span class="toc-text">获取根目录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#获取一个路径"><span class="toc-number">1.4.</span> <span class="toc-text">获取一个路径</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#文件目录操作"><span class="toc-number">2.</span> <span class="toc-text">文件目录操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#创建文件"><span class="toc-number">2.1.</span> <span class="toc-text">创建文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#创建路径"><span class="toc-number">2.2.</span> <span class="toc-text">创建路径</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除文件、路径、链接"><span class="toc-number">2.3.</span> <span class="toc-text">删除文件、路径、链接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#操作目录"><span class="toc-number">2.4.</span> <span class="toc-text">操作目录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#文件复制"><span class="toc-number">2.5.</span> <span class="toc-text">文件复制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#文件移动"><span class="toc-number">2.6.</span> <span class="toc-text">文件移动</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#读写文件"><span class="toc-number">3.</span> <span class="toc-text">读写文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#读取"><span class="toc-number">3.1.</span> <span class="toc-text">读取</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#写入"><span class="toc-number">3.2.</span> <span class="toc-text">写入</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#输入输出流"><span class="toc-number">4.</span> <span class="toc-text">输入输出流</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#读取二进制数据"><span class="toc-number">5.</span> <span class="toc-text">读取二进制数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#读取数据"><span class="toc-number">5.1.</span> <span class="toc-text">读取数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#获取可读取数据大小"><span class="toc-number">5.2.</span> <span class="toc-text">获取可读取数据大小</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#跳过指定个数字节"><span class="toc-number">5.3.</span> <span class="toc-text">跳过指定个数字节</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#标记位置"><span class="toc-number">5.4.</span> <span class="toc-text">标记位置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#返回标记处"><span class="toc-number">5.5.</span> <span class="toc-text">返回标记处</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#关闭流"><span class="toc-number">5.6.</span> <span class="toc-text">关闭流</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#写入二进制数据"><span class="toc-number">6.</span> <span class="toc-text">写入二进制数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#写入数据"><span class="toc-number">6.1.</span> <span class="toc-text">写入数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#关闭流、刷新流"><span class="toc-number">6.2.</span> <span class="toc-text">关闭流、刷新流</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#写文本"><span class="toc-number">7.</span> <span class="toc-text">写文本</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Writer"><span class="toc-number">8.</span> <span class="toc-text">Writer</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#写入文本"><span class="toc-number">8.1.</span> <span class="toc-text">写入文本</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#OutputStreamWriter"><span class="toc-number">8.2.</span> <span class="toc-text">OutputStreamWriter</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PrintWriter"><span class="toc-number">8.3.</span> <span class="toc-text">PrintWriter</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#读取文本"><span class="toc-number">9.</span> <span class="toc-text">读取文本</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#读取文本数据"><span class="toc-number">9.1.</span> <span class="toc-text">读取文本数据</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#InputStreamReader"><span class="toc-number">10.</span> <span class="toc-text">InputStreamReader</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#BufferedReader"><span class="toc-number">11.</span> <span class="toc-text">BufferedReader</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PrintStream"><span class="toc-number">12.</span> <span class="toc-text">PrintStream</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Random-Access-Files"><span class="toc-number">13.</span> <span class="toc-text">Random Access Files</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ByteBuffer"><span class="toc-number">14.</span> <span class="toc-text">ByteBuffer</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#对象的序列化"><span class="toc-number">15.</span> <span class="toc-text">对象的序列化</span></a></li></ol>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="Hide Sidebar"></a></div>
<aside class="clearfix">

  
<div class="github-card">
<p class="asidetitle">Github Card</p>
<div class="github-card" data-github="dayAndnight2018" data-theme="medium"></div>
<script type="text/javascript" src="//cdn.jsdelivr.net/github-cards/latest/widget.js" ></script>
</div>



  

  
<div class="tagslist">
	<p class="asidetitle">Tags</p>
		<ul class="clearfix">
		
			
				<li><a href="/blog/tags/java/" title="java">java<sup>21</sup></a></li>
			
		
			
				<li><a href="/blog/tags/SSM/" title="SSM">SSM<sup>5</sup></a></li>
			
		
			
				<li><a href="/blog/tags/spring-boot/" title="spring-boot">spring-boot<sup>5</sup></a></li>
			
		
			
				<li><a href="/blog/tags/spring/" title="spring">spring<sup>4</sup></a></li>
			
		
			
				<li><a href="/blog/tags/microservice/" title="microservice">microservice<sup>3</sup></a></li>
			
		
			
				<li><a href="/blog/tags/other/" title="other">other<sup>2</sup></a></li>
			
		
			
				<li><a href="/blog/tags/spring-mvc/" title="spring mvc">spring mvc<sup>2</sup></a></li>
			
		
			
				<li><a href="/blog/tags/git/" title="git">git<sup>1</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">Links</p>
    <ul>
        
          <li>
            
            	<a href="https://blog.csdn.net/Day_and_Night_2017" target="_blank" title="我在CSDN">我在CSDN</a>
            
          </li>
        
          <li>
            
            	<a href="http://wuchong.me" target="_blank" title="Jark&#39;s Blog">Jark&#39;s Blog</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS</a>
</div>

  <div class="weiboshow">
  <p class="asidetitle">Weibo</p>
    <iframe width="100%" height="119" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=119&fansRow=2&ptype=1&speed=0&skin=9&isTitle=1&noborder=1&isWeibo=0&isFans=0&uid=&verifier=&dpc=1"></iframe>
</div>


</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> The most obstacle, is yourself！ <br/>
			Start, and Stick !</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		
		<a href="https://github.com/dayAndnight2018" target="_blank" class="icon-github" title="github"></a>
		
		
		
		
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2020 
		
		<a href="/blog/about" target="_blank" title="成华">成华</a>
		
		
		</p>
</div>
</footer>
    <script src="/blog/js/jquery-2.0.3.min.js"></script>
<script src="/blog/js/jquery.imagesloaded.min.js"></script>
<script src="/blog/js/gallery.js"></script>
<script src="/blog/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<div class="hoverqrcode clearfix"></div>',
  '<a class="overlay" id="qrcode"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="微信"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="人人"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="微博"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);

  $('.hoverqrcode').hide();

  var myWidth = 0;
  function updatehoverqrcode(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
    var qrsize = myWidth > 1024 ? 200:100;
    var options = {render: 'image', size: qrsize, fill: '#2ca6cb', text: url, radius: 0.5, quiet: 1};
    var p = $('.article-share-qrcode').position();
    $('.hoverqrcode').empty().css('width', qrsize).css('height', qrsize)
                          .css('left', p.left-qrsize/2+20).css('top', p.top-qrsize-10)
                          .qrcode(options);
  };
  $(window).resize(function(){
    $('.hoverqrcode').hide();
  });
  $('.article-share-qrcode').click(function(){
    updatehoverqrcode();
    $('.hoverqrcode').toggle();
  });
  $('.article-share-qrcode').hover(function(){}, function(){
      $('.hoverqrcode').hide();
  });
});   
</script>











<link rel="stylesheet" href="/blog/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/blog/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e6d1f421bbc9962127a50488f9ed37d1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="Back to Top"><img src="/blog/img/scrollup.png"/></a>
	</div>
	<script src="/blog/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
</html>
